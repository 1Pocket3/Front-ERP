import{d as L,r,ae as T,t as k,Z as F,A as s,z as e,W as y,B as g,X as D,y as v,x as V,L as U,c as M,o as P,i as I,v as E,a6 as R,_ as j}from"./BB8S3bsN.js";import{L as K,F as N}from"./BjtmCWkc.js";import{V as S,a as O,b as W}from"./E-ziPuJY.js";import{V as f,l as H}from"./DbW9FAtK.js";import{V as B,c as X,b as Y,d as Z,B as G}from"./ZsxwoMa0.js";import{V as J,a as m,c as _}from"./3Pco2DPi.js";import{V as Q}from"./DSqGcugx.js";import{V as ee}from"./Cyp6ahR6.js";import{V as te}from"./DULg_Pj-.js";import{a as d}from"./E7Gj0k-g.js";import{V as ae}from"./BmcQcO2B.js";const se={class:"title text-white"},le=L({__name:"RequestFilterModal",setup(t){const l=r(null),{t:i}=T(),c=r(!0),p=r(!1),w=r([i("request_status_1"),i("request_status_2"),i("request_status_3"),i("request_status_4"),i("request_status_5"),i("request_status_6"),i("request_status_7"),i("request_status_8")]),h=r(-1),u=r({id:"",avatar:"1.jpg",userinfo:"",usermail:"",phone:"",jdate:"",role:"",projects_select:"",stage_select:"",types_project:"",location:""}),$=r({id:"",avatar:"1.jpg",userinfo:"",usermail:"",phone:"",jdate:"",role:"",projects_select:"",stage_select:"",types_project:"",location:""});function q(){p.value=!1,setTimeout(()=>{u.value=Object.assign({},$.value),h.value=-1},300)}function A(){h.value>-1,q()}return(n,a)=>(k(),F(H,{modelValue:l.value,"onUpdate:modelValue":a[5]||(a[5]=o=>l.value=o),color:"primary",variant:"outlined"},{default:s(()=>[e(f,null,{default:s(()=>[e(y(K),{"stroke-width":"1.5",size:"20",class:"text-primary"}),e(S,{activator:"parent",location:"top",style:{"font-size":"small"}},{default:s(()=>[g("Kanban mode")]),_:1})]),_:1}),e(te,{modelValue:p.value,"onUpdate:modelValue":a[4]||(a[4]=o=>p.value=o),"max-width":"700"},{activator:s(({props:o})=>[e(f,D(o,{icon:"mdi-format-align-center"}),{default:s(()=>[e(y(N),{"stroke-width":"1.5",size:"20",class:"text-primary"}),e(S,{activator:"parent",location:"top",style:{"font-size":"small"}},{default:s(()=>[g(v(n.$t("filters")),1)]),_:1})]),_:2},1040)]),default:s(()=>[e(B,null,{default:s(()=>[e(X,{class:"pa-4 bg-primary"},{default:s(()=>[V("span",se,v(n.$t("filters")),1)]),_:1}),e(Y,null,{default:s(()=>[e(O,{ref:"form",modelValue:c.value,"onUpdate:modelValue":a[3]||(a[3]=o=>c.value=o),"lazy-validation":""},{default:s(()=>[e(J,null,{default:s(()=>[e(m,{cols:"12",sm:"6"},{default:s(()=>[e(_,{variant:"outlined","hide-details":"",modelValue:u.value.id,"onUpdate:modelValue":a[0]||(a[0]=o=>u.value.id=o),label:n.$t("request_name")},null,8,["modelValue","label"])]),_:1}),e(m,{cols:"12",sm:"6"},{default:s(()=>[e(_,{variant:"outlined","hide-details":"",label:n.$t("manager_who_created")},null,8,["label"])]),_:1}),e(m,{cols:"12",sm:"6"},{default:s(()=>[e(_,{variant:"outlined","hide-details":"",modelValue:u.value.usermail,"onUpdate:modelValue":a[1]||(a[1]=o=>u.value.usermail=o),label:n.$t("spectators")},null,8,["modelValue","label"])]),_:1}),e(m,{cols:"12",sm:"6"},{default:s(()=>[e(_,{variant:"outlined","hide-details":"",modelValue:u.value.phone,"onUpdate:modelValue":a[2]||(a[2]=o=>u.value.phone=o),label:n.$t("project_manager"),type:"phone"},null,8,["modelValue","label"])]),_:1}),e(m,{cols:"12",sm:"6"},{default:s(()=>[e(_,{variant:"outlined","hide-details":"",label:n.$t("manager_responsible")},null,8,["label"])]),_:1}),e(m,{cols:"12",sm:"6"},{default:s(()=>[e(_,{variant:"outlined","hide-details":"",type:"date",label:n.$t("data_was_added")},null,8,["label"])]),_:1}),e(m,{cols:"12",sm:"6"},{default:s(()=>[e(Q,{variant:"outlined","hide-details":"",items:w.value,"return-object":"",label:n.$t("request_status_text")},null,8,["items","label"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(Z,{class:"pa-4"},{default:s(()=>[e(ee),e(f,{color:"error",onClick:q},{default:s(()=>[g(v(n.$t("cancel")),1)]),_:1}),e(f,{color:"secondary",disabled:u.value.userinfo==""||u.value.usermail=="",variant:"flat",onClick:A},{default:s(()=>[g(v(n.$t("save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}}),oe=U({id:"management",state:()=>({acquisitions:[],statuses:[],isLoaded:!1,statusesLoaded:!1}),getters:{getAcquisitions:t=>t.acquisitions,getStatuses:t=>t.statuses,isAcquisitionsLoaded:t=>t.isLoaded,isStatusesLoaded:t=>t.statusesLoaded},actions:{async fetchAcquisitions(){try{const t=await d.get("/management/acquisitions/");this.acquisitions=t.data,this.isLoaded=!0}catch(t){alert(t),console.log(t)}},async fetchAcquisitionById(t){try{return(await d.get(`/management/acquisitions/${t}/`)).data}catch(l){alert(l),console.log(l)}},async createAcquisition(t){try{await d.post("/management/acquisitions/",t),await this.fetchAcquisitions()}catch(l){alert(l),console.log(l)}},async updateAcquisition(t,l){try{await d.put(`/management/acquisitions/${t}/`,l),await this.fetchAcquisitions()}catch(i){alert(i),console.log(i)}},async patchAcquisition(t,l){try{await d.patch(`/management/acquisitions/${t}/`,l),await this.fetchAcquisitions()}catch(i){alert(i),console.log(i)}},async deleteAcquisition(t){try{await d.delete(`/management/acquisitions/${t}/`),await this.fetchAcquisitions()}catch(l){alert(l),console.log(l)}},async fetchStatuses(){try{const t=await d.get("/management/statuses/");this.statuses=t.data,this.statusesLoaded=!0}catch(t){alert(t),console.log(t)}},async fetchStatusById(t){try{return(await d.get(`/management/statuses/${t}/`)).data}catch(l){alert(l),console.log(l)}}}}),ie={class:"container_filters py-2"},ne={class:"search-wrapper"},re={class:"filter-wrapper"},ue=L({__name:"requests",setup(t){const l=oe(),{t:i}=T(),c=r([]),p=r([]),w=r([{text:"Cereri de AchiziÈ›ii",disabled:!1,href:"#"}]);r(1);const h=r(5),u=r(1),$=M(()=>[{title:"Id",align:"start",value:"id"},{title:i("name_purchase_request"),align:"start",value:"name_purchase_request"},{title:i("manager_who_created"),align:"start",value:"manager_who_created"},{title:i("spectators"),align:"start",value:"spectators"},{title:i("manager_responsible"),align:"start",value:"manager_responsible"},{title:i("data_was_added"),align:"start",value:"data_was_added"},{title:i("request_status"),align:"center",value:"request_status"}]),q=async()=>{l.isAcquisitionsLoaded||await l.fetchAcquisitions(),c.value=l.getAcquisitions.results,console.log("FETCH getAcquisitions",c.value)},A=a=>{const o=new Date(a.created_at),C=`${o.getFullYear()}-${(o.getMonth()+1).toString().padStart(2,"0")}-${o.getDate().toString().padStart(2,"0")}`;return{id:a.id.toString(),name_purchase_request:a.name,manager_who_created:a.created_by.first_name+" "+a.created_by.last_name,spectators:"test",manager_responsible:a.responsible.first_name+" "+a.responsible.last_name,data_was_added:C,request_status:{id:a.status.id,name:a.status.name,color:a.status.color,is_default:a.status.is_default}}},n=()=>{const a=c.value.map(A);p.value=a,u.value=Math.ceil(c.value.length/h.value)};return P(async()=>{try{await q(),n()}catch(a){console.error("Error fetching projects:",a)}}),(a,o)=>{const C=I("PencilIcon"),z=I("TrashIcon");return k(),E(R,null,[e(G,{projectTitle:void 0,breadcrumbs:w.value},null,8,["breadcrumbs"]),V("div",ie,[V("div",ne,[e(_,{"append-inner-icon":"mdi-magnify",label:y(i)("search_input_text_requests"),"single-line":"",density:"compact","hide-details":"",class:"search-field"},null,8,["label"])]),V("div",re,[e(le)])]),e(B,{class:"border",elevation:"0"},{default:s(()=>[e(W,{"items-per-page":"5",headers:y($),items:p.value,onClick:o[2]||(o[2]=b=>console.log("CLICKED ROW)")),class:"border rounded-md"},{"item.request_status":s(({item:b})=>[e(ae,{rounded:"lg",class:"font-weight-bold",color:b.request_status.color,size:"small",label:""},{default:s(()=>[g(v(b.request_status.name),1)]),_:2},1032,["color"])]),"item.settings":s(({item:b})=>[e(f,{icon:"",flat:"",onClick:o[0]||(o[0]=x=>console.log("edited"))},{default:s(()=>[e(C,{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:1}),e(f,{icon:"",flat:"",onClick:o[1]||(o[1]=x=>console.log("edited"))},{default:s(()=>[e(z,{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:1})]),_:1},8,["headers","items"])]),_:1})],64)}}}),Ve=j(ue,[["__scopeId","data-v-cbaf03c8"]]);export{Ve as default};
