import{_ as q,t as z,Z as G,A as t,z as e,B as c,y as p,$ as H,d as L,r as n,ae as O,v as A,W as h,X as J,x as i,c as Q,o as ee,a0 as te,a6 as ae,a5 as N,q as le,C as se,D as oe}from"./BB8S3bsN.js";import{V as re}from"./DoFQ2NpD.js";import{_ as ne}from"./Blm4BzHN.js";import{L as ie,F as de,d as ue,P as ce,T as me}from"./BjtmCWkc.js";import{V as b,l as pe}from"./DbW9FAtK.js";import{V as x,a as _e,b as fe}from"./E-ziPuJY.js";import{V as R}from"./DULg_Pj-.js";import{V as B,c as Y,b as ve,d as W,B as ge}from"./ZsxwoMa0.js";import{V as Ve,a as V,c as w}from"./3Pco2DPi.js";import{V as U}from"./DSqGcugx.js";import{V as F}from"./Cyp6ahR6.js";import{u as ye,a as je}from"./URgByaF5.js";import{u as he}from"./BuGD_zu4.js";import{V as K}from"./BmcQcO2B.js";import"./E7Gj0k-g.js";const be={name:"Alerts",props:{type:{type:String,required:!0}},computed:{message(){switch(this.type){case"success":return"Successfully created!";case"error":return"Project was deleted!";case"warning":return"Project was deleted!";default:return"Notification"}}}};function $e(y,m,o,j,f,v){return z(),G(H,{name:"slide-top"},{default:t(()=>[e(re,{type:o.type},{default:t(()=>[c(p(v.message),1)]),_:1},8,["type"])]),_:1})}const ke=q(be,[["render",$e]]),we={class:"title text-white"},Se=L({__name:"FilterModal",setup(y){const m=n(null),{t:o}=O(),j=n(!0),f=n(!1),v=n([o("residential_constructions"),o("commercial_constructions"),o("industrial_construction"),o("public_infrastructure")]),I=n([o("idea_and_concept"),o("planning"),o("design_and_development"),o("sales_and_construction"),o("testing_and_verification"),o("completion"),o("launch_and_commissioning"),o("closing_the_project")]),S=n([o("country"),o("city"),o("street")]),g=n(-1),a=n({id:"",avatar:"1.jpg",userinfo:"",usermail:"",phone:"",jdate:"",role:"",projects_select:"",stage_select:"",types_project:"",location:""}),$=n({id:"",avatar:"1.jpg",userinfo:"",usermail:"",phone:"",jdate:"",role:"",projects_select:"",stage_select:"",types_project:"",location:""});function C(){f.value=!1,setTimeout(()=>{a.value=Object.assign({},$.value),g.value=-1},300)}function T(){g.value>-1,C()}return(d,l)=>(z(),A("div",null,[e(pe,{modelValue:m.value,"onUpdate:modelValue":l[9]||(l[9]=s=>m.value=s),variant:"outlined"},{default:t(()=>[e(b,null,{default:t(()=>[e(h(ie),{"stroke-width":"1.5",size:"20",class:"text-primary"}),e(x,{activator:"parent",location:"top",style:{"font-size":"small"}},{default:t(()=>[c("Kanban mode")]),_:1})]),_:1}),e(R,{modelValue:f.value,"onUpdate:modelValue":l[8]||(l[8]=s=>f.value=s),"max-width":"700"},{activator:t(({props:s})=>[e(b,J(s,{icon:"mdi-format-align-center"}),{default:t(()=>[e(h(de),{"stroke-width":"1.5",size:"20",class:"text-primary"}),e(x,{activator:"parent",location:"top",style:{"font-size":"small"}},{default:t(()=>[c(p(d.$t("filters")),1)]),_:1})]),_:2},1040)]),default:t(()=>[e(B,null,{default:t(()=>[e(Y,{class:"pa-4 bg-primary"},{default:t(()=>[i("span",we,p(d.$t("filters")),1)]),_:1}),e(ve,null,{default:t(()=>[e(_e,{ref:"form",modelValue:j.value,"onUpdate:modelValue":l[7]||(l[7]=s=>j.value=s),"lazy-validation":""},{default:t(()=>[e(Ve,null,{default:t(()=>[e(V,{cols:"12",sm:"6"},{default:t(()=>[e(w,{variant:"outlined","hide-details":"",modelValue:a.value.id,"onUpdate:modelValue":l[0]||(l[0]=s=>a.value.id=s),label:d.$t("project_name")},null,8,["modelValue","label"])]),_:1}),e(V,{cols:"12",sm:"6"},{default:t(()=>[e(w,{variant:"outlined","hide-details":"",type:"date",modelValue:a.value.userinfo,"onUpdate:modelValue":l[1]||(l[1]=s=>a.value.userinfo=s),label:d.$t("start_date")},null,8,["modelValue","label"])]),_:1}),e(V,{cols:"12",sm:"6"},{default:t(()=>[e(w,{variant:"outlined","hide-details":"",type:"date",modelValue:a.value.usermail,"onUpdate:modelValue":l[2]||(l[2]=s=>a.value.usermail=s),label:d.$t("end_date")},null,8,["modelValue","label"])]),_:1}),e(V,{cols:"12",sm:"6"},{default:t(()=>[e(w,{variant:"outlined","hide-details":"",modelValue:a.value.phone,"onUpdate:modelValue":l[3]||(l[3]=s=>a.value.phone=s),label:d.$t("project_manager"),type:"phone"},null,8,["modelValue","label"])]),_:1}),e(V,{cols:"12",sm:"6"},{default:t(()=>[e(U,{variant:"outlined","hide-details":"",items:I.value,modelValue:a.value.stage_select,"onUpdate:modelValue":l[4]||(l[4]=s=>a.value.stage_select=s),label:d.$t("project_stage")},null,8,["items","modelValue","label"])]),_:1}),e(V,{cols:"12",sm:"6"},{default:t(()=>[e(U,{variant:"outlined","hide-details":"",items:v.value,modelValue:a.value.projects_select,"onUpdate:modelValue":l[5]||(l[5]=s=>a.value.projects_select=s),label:d.$t("project_type")},null,8,["items","modelValue","label"])]),_:1}),e(V,{cols:"12",sm:"6"},{default:t(()=>[e(U,{variant:"outlined","hide-details":"",items:S.value,modelValue:a.value.location,"onUpdate:modelValue":l[6]||(l[6]=s=>a.value.location=s),label:d.$t("location")},null,8,["items","modelValue","label"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(W,{class:"pa-4"},{default:t(()=>[e(F),e(b,{color:"error",onClick:C},{default:t(()=>[c(p(d.$t("cancel")),1)]),_:1}),e(b,{color:"secondary",disabled:a.value.userinfo==""||a.value.usermail=="",variant:"flat",onClick:T},{default:t(()=>[c(p(d.$t("save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]))}}),Ce=y=>(se("data-v-8ef5da6f"),y=y(),oe(),y),De={key:0,class:"mt-2 alert-container"},Pe={class:"container_filters py-4"},ze={class:"search-wrapper"},xe={class:"filter-wrapper"},Ie=["onClick"],Te=Ce(()=>i("img",{src:ne,width:"25"},null,-1)),Ue={class:"action-btn"},Ae=["onClick"],Be=L({__name:"projects",setup(y){const{t:m}=O(),o=ye(),j=he(),f=je(),v=n([]),I=n(null),S=n("success"),g=n(!1),a=n(!1),$=n([]);n(1);const C=n(5),T=n(1),d=Q(()=>[{title:"Id",align:"start",key:"id"},{title:m("project_name"),align:"start",key:"project_name"},{title:m("start_date"),align:"start",key:"start_date"},{title:m("end_date"),align:"start",key:"end_date"},{title:m("project_manager"),align:"start",key:"project_manager"},{title:m("project_status"),align:"start",key:"project_status"},{title:m("settings"),align:"center",key:"settings"}]),l=async()=>{await o.fetchProjects(),v.value=o.getProjects.results.map(s)},s=r=>{const _=new Date(r.start_date),k=new Date(r.end_date),D=`${_.getFullYear()}-${(_.getMonth()+1).toString().padStart(2,"0")}-${_.getDate().toString().padStart(2,"0")}`,u=`${k.getFullYear()}-${(k.getMonth()+1).toString().padStart(2,"0")}-${k.getDate().toString().padStart(2,"0")}`;return{id:r.id,project_name:r.project_name,project_status:{id:r.project_status.id,name:r.project_status.name,color:r.project_status.color,is_default:r.project_status.is_default},project_manager:{first_name:r.manager.first_name,last_name:r.manager.last_name},start_date:D,end_date:u,settings:r.settings}},M=()=>{$.value=v.value,T.value=Math.ceil(v.value.length/C.value)},X=r=>le(`/project/${r.id}`),E=r=>{a.value=!a.value},Z=async r=>{a.value=!0;try{await o.deleteProject(r),j.toggleAlertVisibility(),S.value="error",await l(),M(),a.value=!1}catch(_){console.error("Error deleting project:",_)}};return ee(async()=>{g.value=!0;try{await Promise.all([l(),f.fetchStatuses()]),I.value=f.getStatuses,M(),g.value=!1}catch(r){console.error("Error fetching projects:",r),g.value=!1}}),(r,_)=>{var D;const k=ke;return z(),A(ae,null,[e(ge,{"project-title":(D=$.value[0])==null?void 0:D.project_name},null,8,["project-title"]),h(j).showAlert?(z(),A("div",De,[e(k,{type:S.value},null,8,["type"])])):te("",!0),i("div",Pe,[i("div",ze,[e(w,{label:h(m)("search_input_text_projects"),"single-line":"",density:"compact","hide-details":"",class:"search-field"},null,8,["label"])]),i("div",xe,[e(Se)])]),e(B,{elevation:"0"},{default:t(()=>[e(fe,{"items-per-page":"5",page:"1",headers:d.value,"item-key":"id",items:$.value,class:"border rounded-md table-hover",loading:g.value},{item:t(({item:u})=>[i("tr",{onClick:P=>X(u),style:{cursor:"pointer"}},[i("td",null,p(u.id),1),i("td",null,p(u.project_name),1),i("td",null,p(u.start_date),1),i("td",null,p(u.end_date),1),i("td",null,[e(K,{color:"primary",class:"text-body-2"},{default:t(()=>[e(ue,{start:"",size:"25"},{default:t(()=>[Te]),_:1}),c(" "+p(`${u.project_manager.first_name} ${u.project_manager.last_name}`),1)]),_:2},1024)]),i("td",null,[e(K,{rounded:"lg",class:"font-weight-bold",color:u.project_status.color,size:"small",label:""},{default:t(()=>[c(p(u.project_status.name),1)]),_:2},1032,["color"])]),i("td",null,[i("div",Ue,[i("div",{onClick:_[0]||(_[0]=N(()=>{},["stop"]))},[e(h(ce),{"stroke-width":"1.5",size:"20",class:"text-primary"}),e(x,{activator:"parent",location:"top",style:{"font-size":"small"}},{default:t(()=>[c("Edit")]),_:1})]),i("div",{onClick:N(P=>E(u.id),["stop"])},[e(h(me),{"stroke-width":"1.5",size:"20",class:"text-error"}),e(x,{activator:"parent",location:"top",style:{"font-size":"small"}},{default:t(()=>[c("Delete")]),_:1})],8,Ae)])])],8,Ie),e(R,{modelValue:a.value,"onUpdate:modelValue":_[1]||(_[1]=P=>a.value=P),"max-width":"500px"},{default:t(()=>[e(B,null,{default:t(()=>[e(Y,{class:"text-h5 text-center py-6"},{default:t(()=>[c("Sigur doriți să ștergeți acest proiect?")]),_:1}),e(W,null,{default:t(()=>[e(F),e(b,{color:"error",variant:"flat",dark:"",onClick:E},{default:t(()=>[c("Anulare")]),_:1}),e(b,{color:"success",variant:"flat",dark:"",onClick:P=>Z(u.id)},{default:t(()=>[c("OK")]),_:2},1032,["onClick"]),e(F)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:1},8,["headers","items","loading"])]),_:1})],64)}}}),Je=q(Be,[["__scopeId","data-v-8ef5da6f"]]);export{Je as default};
