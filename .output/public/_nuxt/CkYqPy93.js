import{_ as K,t as x,v as D,a6 as L,S as Q,a3 as Se,y as h,ag as R,ar as ee,ai as U,r as T,c as j,z as r,X,as as te,at as _e,au as we,av as Ce,af as Te,aq as z,H as Ie,an as Pe,a9 as ae,aw as ke,ax as oe,aj as ne,aa as Be,ay as G,P as xe,O as $,az as $e,aA as Ee,d as le,ae as We,o as se,x as f,A as y,W as P,B as p,Z as ue,C as De,D as Xe,aB as Me}from"./BB8S3bsN.js";import{a as Re,u as Ue}from"./URgByaF5.js";import{m as Ye,a as Ae,u as Y,V as M,f as He,b as Le,s as ze,c as re,d as ie,e as Ge,g as Oe,h as qe,M as Fe,i as Ne,j as Ze,k as Je}from"./DbW9FAtK.js";import{m as Ke,u as Qe,a as et,b as tt,c as at,V as Z}from"./BjtmCWkc.js";import{V as O,a as ot,b as J,c as nt,d as lt,B as st}from"./ZsxwoMa0.js";import{c as C}from"./3Pco2DPi.js";import{V as ut}from"./DULg_Pj-.js";import"./E7Gj0k-g.js";const rt={props:{statuses:{type:Array,required:!0},currentProjectId:{required:!0}},data(){return{steps:this.statuses,currentStep:this.currentProjectId}},mounted(){console.log("this.steps",this.steps)},watch:{statuses:"extractSteps"},methods:{isActiveStep(e){return e<=this.currentStep}}},it={class:"process-bar"};function dt(e,a,o,t,d,c){return x(),D("div",it,[(x(!0),D(L,null,Q(d.steps,n=>(x(),D("div",{class:Se(["step",{active:c.isActiveStep(n.id)}]),key:n.id},h(n.name),3))),128))])}const ct=K(rt,[["render",dt],["__scopeId","data-v-fa28d9a9"]]),F=Symbol.for("vuetify:v-tabs"),vt=R({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...ee(Ye({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),de=U()({name:"VTab",props:vt(),setup(e,a){let{slots:o,attrs:t}=a;const{textColorClasses:d,textColorStyles:c}=Ae(e,"sliderColor"),n=T(),l=T(),v=j(()=>e.direction==="horizontal"),b=j(()=>{var i,u;return((u=(i=n.value)==null?void 0:i.group)==null?void 0:u.isSelected.value)??!1});function w(i){var s,m;let{value:u}=i;if(u){const S=(m=(s=n.value)==null?void 0:s.$el.parentElement)==null?void 0:m.querySelector(".v-tab--selected .v-tab__slider"),E=l.value;if(!S||!E)return;const H=getComputedStyle(S).color,k=S.getBoundingClientRect(),B=E.getBoundingClientRect(),g=v.value?"x":"y",V=v.value?"X":"Y",_=v.value?"right":"bottom",I=v.value?"width":"height",be=k[g],Ve=B[g],W=be>Ve?k[_]-B[_]:k[g]-B[g],ye=Math.sign(W)>0?v.value?"right":"bottom":Math.sign(W)<0?v.value?"left":"top":"center",pe=(Math.abs(W)+(Math.sign(W)<0?k[I]:B[I]))/Math.max(k[I],B[I])||0,je=k[I]/B[I]||0,N=1.5;Le(E,{backgroundColor:[H,"currentcolor"],transform:[`translate${V}(${W}px) scale${V}(${je})`,`translate${V}(${W/N}px) scale${V}(${(pe-1)/N+1})`,"none"],transformOrigin:Array(3).fill(ye)},{duration:225,easing:ze})}}return Y(()=>{const i=M.filterProps(e);return r(M,X({symbol:F,ref:n,class:["v-tab",e.class],style:e.style,tabindex:b.value?0:-1,role:"tab","aria-selected":String(b.value),active:!1},i,t,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":w}),{...o,default:()=>{var u;return r(L,null,[((u=o.default)==null?void 0:u.call(o))??e.text,!e.hideSlider&&r("div",{ref:l,class:["v-tab__slider",d.value],style:c.value},null)])}})}),He({},n)}}),mt=e=>{const{touchstartX:a,touchendX:o,touchstartY:t,touchendY:d}=e,c=.5,n=16;e.offsetX=o-a,e.offsetY=d-t,Math.abs(e.offsetY)<c*Math.abs(e.offsetX)&&(e.left&&o<a-n&&e.left(e),e.right&&o>a+n&&e.right(e)),Math.abs(e.offsetX)<c*Math.abs(e.offsetY)&&(e.up&&d<t-n&&e.up(e),e.down&&d>t+n&&e.down(e))};function ft(e,a){var t;const o=e.changedTouches[0];a.touchstartX=o.clientX,a.touchstartY=o.clientY,(t=a.start)==null||t.call(a,{originalEvent:e,...a})}function gt(e,a){var t;const o=e.changedTouches[0];a.touchendX=o.clientX,a.touchendY=o.clientY,(t=a.end)==null||t.call(a,{originalEvent:e,...a}),mt(a)}function ht(e,a){var t;const o=e.changedTouches[0];a.touchmoveX=o.clientX,a.touchmoveY=o.clientY,(t=a.move)==null||t.call(a,{originalEvent:e,...a})}function bt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const a={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:o=>ft(o,a),touchend:o=>gt(o,a),touchmove:o=>ht(o,a)}}function Vt(e,a){var l;const o=a.value,t=o!=null&&o.parent?e.parentElement:e,d=(o==null?void 0:o.options)??{passive:!0},c=(l=a.instance)==null?void 0:l.$.uid;if(!t||!c)return;const n=bt(a.value);t._touchHandlers=t._touchHandlers??Object.create(null),t._touchHandlers[c]=n,te(n).forEach(v=>{t.addEventListener(v,n[v],d)})}function yt(e,a){var c,n;const o=(c=a.value)!=null&&c.parent?e.parentElement:e,t=(n=a.instance)==null?void 0:n.$.uid;if(!(o!=null&&o._touchHandlers)||!t)return;const d=o._touchHandlers[t];te(d).forEach(l=>{o.removeEventListener(l,d[l])}),delete o._touchHandlers[t]}const ce={mounted:Vt,unmounted:yt},pt=ce,ve=Symbol.for("vuetify:v-window"),me=Symbol.for("vuetify:v-window-group"),fe=R({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...re(),...ie(),..._e()},"VWindow"),q=U()({name:"VWindow",directives:{Touch:ce},props:fe(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:o}=a;const{themeClasses:t}=we(e),{isRtl:d}=Ce(),{t:c}=Te(),n=Ge(e,me),l=T(),v=j(()=>d.value?!e.reverse:e.reverse),b=z(!1),w=j(()=>{const g=e.direction==="vertical"?"y":"x",_=(v.value?!b.value:b.value)?"-reverse":"";return`v-window-${g}${_}-transition`}),i=z(0),u=T(void 0),s=j(()=>n.items.value.findIndex(g=>n.selected.value.includes(g.id)));Ie(s,(g,V)=>{const _=n.items.value.length,I=_-1;_<=2?b.value=g<V:g===I&&V===0?b.value=!0:g===0&&V===I?b.value=!1:b.value=g<V}),Pe(ve,{transition:w,isReversed:b,transitionCount:i,transitionHeight:u,rootRef:l});const m=j(()=>e.continuous||s.value!==0),S=j(()=>e.continuous||s.value!==n.items.value.length-1);function E(){m.value&&n.prev()}function H(){S.value&&n.next()}const k=j(()=>{const g=[],V={icon:d.value?e.nextIcon:e.prevIcon,class:`v-window__${v.value?"right":"left"}`,onClick:n.prev,"aria-label":c("$vuetify.carousel.prev")};g.push(m.value?o.prev?o.prev({props:V}):r(M,V,null):r("div",null,null));const _={icon:d.value?e.prevIcon:e.nextIcon,class:`v-window__${v.value?"left":"right"}`,onClick:n.next,"aria-label":c("$vuetify.carousel.next")};return g.push(S.value?o.next?o.next({props:_}):r(M,_,null):r("div",null,null)),g}),B=j(()=>e.touch===!1?e.touch:{...{left:()=>{v.value?E():H()},right:()=>{v.value?H():E()},start:V=>{let{originalEvent:_}=V;_.stopPropagation()}},...e.touch===!0?{}:e.touch});return Y(()=>ae(r(e.tag,{ref:l,class:["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover"},t.value,e.class],style:e.style},{default:()=>{var g,V;return[r("div",{class:"v-window__container",style:{height:u.value}},[(g=o.default)==null?void 0:g.call(o,{group:n}),e.showArrows!==!1&&r("div",{class:"v-window__controls"},[k.value])]),(V=o.additional)==null?void 0:V.call(o,{group:n})]}}),[[ke("touch"),B.value]])),{group:n}}}),jt=R({...ee(fe(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),St=U()({name:"VTabsWindow",props:jt(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:o}=a;const t=oe(F,null),d=ne(e,"modelValue"),c=j({get(){var n;return d.value!=null||!t?d.value:(n=t.items.value.find(l=>t.selected.value.includes(l.id)))==null?void 0:n.value},set(n){d.value=n}});return Y(()=>{const n=q.filterProps(e);return r(q,X({_as:"VTabsWindow"},n,{modelValue:c.value,"onUpdate:modelValue":l=>c.value=l,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),o)}),{}}}),ge=R({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...re(),...Oe(),...Ke()},"VWindowItem"),A=U()({name:"VWindowItem",directives:{Touch:pt},props:ge(),emits:{"group:selected":e=>!0},setup(e,a){let{slots:o}=a;const t=oe(ve),d=qe(e,me),{isBooted:c}=Qe();if(!t||!d)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const n=z(!1),l=j(()=>c.value&&(t.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function v(){!n.value||!t||(n.value=!1,t.transitionCount.value>0&&(t.transitionCount.value-=1,t.transitionCount.value===0&&(t.transitionHeight.value=void 0)))}function b(){var m;n.value||!t||(n.value=!0,t.transitionCount.value===0&&(t.transitionHeight.value=G((m=t.rootRef.value)==null?void 0:m.clientHeight)),t.transitionCount.value+=1)}function w(){v()}function i(m){n.value&&xe(()=>{!l.value||!n.value||!t||(t.transitionHeight.value=G(m.clientHeight))})}const u=j(()=>{const m=t.isReversed.value?e.reverseTransition:e.transition;return l.value?{name:typeof m!="string"?t.transition.value:m,onBeforeEnter:b,onAfterEnter:v,onEnterCancelled:w,onBeforeLeave:b,onAfterLeave:v,onLeaveCancelled:w,onEnter:i}:!1}),{hasContent:s}=et(e,d.isSelected);return Y(()=>r(Fe,{transition:u.value,disabled:!c.value},{default:()=>{var m;return[ae(r("div",{class:["v-window-item",d.selectedClass.value,e.class],style:e.style},[s.value&&((m=o.default)==null?void 0:m.call(o))]),[[Be,d.isSelected.value]])]}})),{groupItem:d}}}),_t=R({...ge()},"VTabsWindowItem"),wt=U()({name:"VTabsWindowItem",props:_t(),setup(e,a){let{slots:o}=a;return Y(()=>{const t=A.filterProps(e);return r(A,X({_as:"VTabsWindowItem"},t,{class:["v-tabs-window-item",e.class],style:e.style}),o)}),{}}});function Ct(e){return e?e.map(a=>Ee(a)?a:{text:a,value:a}):[]}const Tt=R({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...tt({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Ne(),...ie()},"VTabs"),It=U()({name:"VTabs",props:Tt(),emits:{"update:modelValue":e=>!0},setup(e,a){let{attrs:o,slots:t}=a;const d=ne(e,"modelValue"),c=j(()=>Ct(e.items)),{densityClasses:n}=Ze(e),{backgroundColorClasses:l,backgroundColorStyles:v}=Je($(e,"bgColor")),{scopeId:b}=at();return $e({VTab:{color:$(e,"color"),direction:$(e,"direction"),stacked:$(e,"stacked"),fixed:$(e,"fixedTabs"),sliderColor:$(e,"sliderColor"),hideSlider:$(e,"hideSlider")}}),Y(()=>{const w=Z.filterProps(e),i=!!(t.window||e.items.length>0);return r(L,null,[r(Z,X(w,{modelValue:d.value,"onUpdate:modelValue":u=>d.value=u,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},n.value,l.value,e.class],style:[{"--v-tabs-height":G(e.height)},v.value,e.style],role:"tablist",symbol:F},b,o),{default:()=>{var u;return[((u=t.default)==null?void 0:u.call(t))??c.value.map(s=>{var m;return((m=t.tab)==null?void 0:m.call(t,{item:s}))??r(de,X(s,{key:s.text,value:s.value}),{default:()=>{var S;return(S=t[`tab.${s.value}`])==null?void 0:S.call(t,{item:s})}})})]}}),i&&r(St,X({modelValue:d.value,"onUpdate:modelValue":u=>d.value=u,key:"tabs-window"},b),{default:()=>{var u;return[c.value.map(s=>{var m;return((m=t.item)==null?void 0:m.call(t,{item:s}))??r(wt,{value:s.value},{default:()=>{var S;return(S=t[`item.${s.value}`])==null?void 0:S.call(t,{item:s})}})}),(u=t.window)==null?void 0:u.call(t)]}})])}),{}}}),he=e=>(De("data-v-681bb863"),e=e(),Xe(),e),Pt={key:0},kt={class:"tabs-container"},Bt=he(()=>f("h4",{class:"text-h5 font-weight-bold"},"Project Details",-1)),xt=he(()=>f("strong",null,"ID:",-1)),$t={key:1},Et=le({__name:"ProjectTabs",props:{project:{},currentProjectId:{}},setup(e){const{t:a}=We(),o=Re(),t=T(null),d=T([]),c=T(!1),n=j(()=>[{value:"about",color:"secondary",label:a("about_project")},{value:"purchases",color:"warning",label:a("procurement_requests")},{value:"materials",color:"primary",label:a("materials")},{value:"employees",color:"secondary",label:a("employees")},{value:"teams",color:"warning",label:a("teams")},{value:"workforce",color:"primary",label:a("workforce")},{value:"equipment",color:"secondary",label:a("construction_equipment")},{value:"approvals",color:"warning",label:a("goods_acceptance")},{value:"suppliers",color:"primary",label:a("suppliers")}]),{project:l,currentProjectId:v}=e;T({project_name:l==null?void 0:l.project_name,project_status:l==null?void 0:l.project_status.name,manager_first_name:l==null?void 0:l.manager.first_name,manager_last_name:l==null?void 0:l.manager.last_name,start_date:l==null?void 0:l.start_date,end_date:l==null?void 0:l.end_date,description:l==null?void 0:l.description,comment:l==null?void 0:l.comment,location_city:l==null?void 0:l.location.city,location_street:l==null?void 0:l.location.street});const b=()=>{c.value=!0},w=()=>{c.value=!1};return se(async()=>{d.value=o.getStatuses.results}),(i,u)=>i.project?(x(),D("div",Pt,[f("div",kt,[r(It,{modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=s=>t.value=s)},{default:y(()=>[(x(!0),D(L,null,Q(P(n),s=>(x(),ue(de,{key:s.value,value:s.value,color:s.color},{default:y(()=>[p(h(s.label),1)]),_:2},1032,["value","color"]))),128))]),_:1},8,["modelValue"])]),r(J,{class:"bg-white rounded-md"},{default:y(()=>[r(q,{modelValue:t.value,"onUpdate:modelValue":u[1]||(u[1]=s=>t.value=s)},{default:y(()=>[r(A,{value:"about"},{default:y(()=>[r(ct,{statuses:d.value,currentProjectId:i.currentProjectId},null,8,["statuses","currentProjectId"]),r(O,{class:"mt-2",variant:"outlined"},{default:y(()=>[r(ot,null,{default:y(()=>[f("div",{class:"project-header"},[Bt,f("button",{class:"edit-btn",onClick:b},"Edit")]),f("p",null,[xt,p(" "+h(i.project.id),1)]),f("p",null,[f("strong",null,h(P(a)("project_name")),1),p(" "+h(i.project.project_name),1)]),f("p",null,[f("strong",null,h(P(a)("project_status")),1),p(" "+h(i.project.project_status.name),1)]),f("p",null,[f("strong",null,h(P(a)("project_manager")),1),p(" "+h(i.project.manager.first_name)+" "+h(i.project.manager.last_name),1)]),f("p",null,[f("strong",null,h(P(a)("start_date")),1),p(" "+h(new Date(i.project.start_date).toLocaleDateString()),1)]),f("p",null,[f("strong",null,h(P(a)("end_date")),1),p(" "+h(new Date(i.project.end_date).toLocaleDateString()),1)]),f("p",null,[f("strong",null,h(P(a)("additional_text"))+":",1),p(" "+h(i.project.description),1)]),f("p",null,[f("strong",null,h(P(a)("project_description"))+":",1),p(" "+h(i.project.comment),1)]),f("p",null,[f("strong",null,h(P(a)("location"))+":",1),p(" "+h(i.project.location.city)+", "+h(i.project.location.street),1)])]),_:1})]),_:1})]),_:1}),r(A,{value:"purchases"},{default:y(()=>[p("purchases")]),_:1}),r(A,{value:"materials"},{default:y(()=>[p("materials")]),_:1})]),_:1},8,["modelValue"])]),_:1}),r(ut,{modelValue:c.value,"onUpdate:modelValue":u[13]||(u[13]=s=>c.value=s),"max-width":"800px"},{default:y(()=>[r(O,null,{default:y(()=>[r(nt,null,{default:y(()=>[p("Edit Project")]),_:1}),r(J,null,{default:y(()=>[r(C,{modelValue:i.project.project_name,"onUpdate:modelValue":u[2]||(u[2]=s=>i.project.project_name=s),label:"Project Name"},null,8,["modelValue"]),r(C,{modelValue:i.project.project_status,"onUpdate:modelValue":u[3]||(u[3]=s=>i.project.project_status=s),label:"Project Status"},null,8,["modelValue"]),r(C,{modelValue:i.project.manager.first_name,"onUpdate:modelValue":u[4]||(u[4]=s=>i.project.manager.first_name=s),label:"Manager First Name"},null,8,["modelValue"]),r(C,{modelValue:i.project.manager.last_name,"onUpdate:modelValue":u[5]||(u[5]=s=>i.project.manager.last_name=s),label:"Manager Last Name"},null,8,["modelValue"]),r(C,{modelValue:i.project.start_date,"onUpdate:modelValue":u[6]||(u[6]=s=>i.project.start_date=s),label:"Start Date"},null,8,["modelValue"]),r(C,{modelValue:i.project.end_date,"onUpdate:modelValue":u[7]||(u[7]=s=>i.project.end_date=s),label:"End Date"},null,8,["modelValue"]),r(C,{modelValue:i.project.description,"onUpdate:modelValue":u[8]||(u[8]=s=>i.project.description=s),label:"Additional Text"},null,8,["modelValue"]),r(C,{modelValue:i.project.comment,"onUpdate:modelValue":u[9]||(u[9]=s=>i.project.comment=s),label:"Project Description"},null,8,["modelValue"]),r(C,{modelValue:i.project.location.city,"onUpdate:modelValue":u[10]||(u[10]=s=>i.project.location.city=s),label:"Location City"},null,8,["modelValue"]),r(C,{modelValue:i.project.location.street,"onUpdate:modelValue":u[11]||(u[11]=s=>i.project.location.street=s),label:"Location Street"},null,8,["modelValue"])]),_:1}),r(lt,null,{default:y(()=>[r(M,{color:"primary",onClick:u[12]||(u[12]=s=>console.log("saved"))},{default:y(()=>[p("Save")]),_:1}),r(M,{color:"error",onClick:w},{default:y(()=>[p("Cancel")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])):(x(),D("div",$t,"Data loading..."))}}),Wt=K(Et,[["__scopeId","data-v-681bb863"]]),zt=le({__name:"[id]",setup(e){const a=Me(),o=Ue(),t=T(null),d=T(0),c=()=>{var n;d.value=(n=t.value)==null?void 0:n.project_status.id};return se(async()=>{const n=parseInt(a.params.id,10);t.value=await o.getProjectById(n),c()}),(n,l)=>(x(),ue(O,{variant:"outlined"},{default:y(()=>{var v;return[r(st,{projectTitle:(v=t.value)==null?void 0:v.project_name},null,8,["projectTitle"]),r(Wt,{project:t.value,currentProjectId:d.value},null,8,["project","currentProjectId"])]}),_:1}))}});export{zt as default};
